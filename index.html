<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
        <meta charset="UTF-8">
    </head>
    <body>
        <script>
            const CHOICES = ["rock", "paper", "scissors"];

            function computerPlay(){
                return CHOICES[Math.floor(Math.random()*CHOICES.length)]
            }
            function playRound(playerSelection, computerSelection){
                if(playerSelection == computerSelection){
                    return "tie";
                }
                else if(playerSelection == "rock"){
                    if(computerSelection == "paper"){
                        return 'computerWin';
                    }
                    else{
                        return 'playerWin';
                    }
                }
                else if(playerSelection == "paper"){
                    if(computerSelection == "scissors"){
                        return 'computerWin';
                    }
                    else{
                        return 'playerWin';
                    }
                }
                else if(playerSelection == "scissors"){
                    if(computerSelection == "rock"){
                        return 'computerWin';
                    }
                    else{
                        return 'playerWin';
                    }
                }
                else{
                    return "Something went terribly wrong.";
                }
            }
            
            function isValid(playerSelection){
                while(!CHOICES.includes(playerSelection)){
                    playerSelection = prompt("Please enter a valid selection. (Rock, Paper or Scissors)").toLowerCase();
                }
                return playerSelection;
            }


            function game(){
                let playerScore = 0;
                let computerScore  = 0;
                for(let i = 0; i < 5; ++i){
                    playerSelection = prompt("Select a move! (Rock, Paper, Scissors)").toLowerCase();
                    playerSelection = isValid(playerSelection);
                    computerSelection = computerPlay();
                    const win = playRound(playerSelection, computerSelection);
                    let winningMsg;
                    if(win == 'tie'){
                        winningMsg = "It's a tie!";
                    }
                    else if(win == 'playerWin'){
                        playerScore++;
                        winningMsg = `Player wins; ${playerSelection} beats ${computerSelection}.`;
                    }
                    else if(win == 'computerWin'){
                        computerScore++;
                        winningMsg = `Computer wins; ${computerSelection} beats ${playerSelection}.`;
                    }
                    console.log(winningMsg);
                }
                console.log(`Player Score: ${playerScore}, Computer Score: ${computerScore}`);
            }
            game();
        </script>
    </body>
</html>